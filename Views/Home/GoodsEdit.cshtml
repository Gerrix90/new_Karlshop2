@model new_Karlshop.Data.Goods;

@{
	ViewData["Title"] = "GoodsEdit";
	Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="~/js/baidujquery.js"></script>
<link href="~/css/star-rating.css" media="all" rel="stylesheet" type="text/css" />
<script src="~/js/star-rating.js" type="text/javascript"></script>

<div class="tab1">
	<div class="container">
		<div class="row">
			<div class="col-md-4 col-sm-6">
				<div id="myCarousel" class="carousel slide">
					<ol class="carousel-indicators">
						<li data-target="#myCarousel" data-slide-to="0" class="active"></li>
						<li data-target="#myCarousel" data-slide-to="1"></li>
						<li data-target="#myCarousel" data-slide-to="2"></li>
					</ol>

					<div class="carousel-inner">

						<div class="item active">
							@{
								var imagePathName = ViewBag.imgPath + Model.ori_img;

								<img class="myImg" src=@Html.Raw(imagePathName) alt="第一张" style="margin: 0 auto">
							}
						</div>

						<div class="item">
							@{
								var imagePathName1 = ViewBag.imgPath + Model.ori_img1;

								<img class="myImg" src=@Html.Raw(imagePathName1) alt="第2张" style="margin: 0 auto">
							}
						</div>
						<div class="item">
							@{
								var imagePathName2 = ViewBag.imgPath + Model.ori_img2;

								<img class="myImg" src=@Html.Raw(imagePathName2) alt="第2张" style="margin: 0 auto">
							}
						</div>

					</div>
					<a href="#myCarousel" data-slide="prev" class="carousel-control left" style="font-size:50px;">&lsaquo;</a>
					<a href="#myCarousel" data-slide="next" class="carousel-control right" style="font-size:50px;">&rsaquo;</a>
				</div>
			</div>
			<div class="panel panel-primary col-md-6 col-sm-6" style="box-shadow:2px 2px 3px #ccc;">
				<div class="panel-heading"><h5>Goods Details</h5></div>
				<table class="table table-striped">
					<tr>
						<th class="col-md-3 col-sm-3">
							@Html.DisplayNameFor(model => model.goods_id)
						</th>
						<td>
							@Html.DisplayFor(model => model.goods_id)
						</td>
					</tr>
					<tr>
						<th class="col-md-3 col-sm-3">
							@Html.DisplayNameFor(model => model.goods_name)
						</th>
						<td>
							@Html.DisplayFor(model => model.goods_name)
						</td>
					</tr>
					<tr>
						<th class="col-md-3 col-sm-3">
							@Html.DisplayNameFor(model => model.shop_price)
						</th>
						<td>
							@Html.DisplayFor(model => model.shop_price, "MyDecimalTemplate")
						</td>
					</tr>
					<tr>
						<th class="col-md-3 col-sm-3">
							@Html.DisplayNameFor(model => model.market_price)
						</th>
						<td>
							<s>@Html.DisplayFor(model => model.market_price, "MyDecimalTemplate")</s>
						</td>
					</tr>
					<tr>
						<th class="col-md-3 col-sm-3">
							@Html.DisplayNameFor(model => model.goods_quantity)
						</th>
						<td>
							@Html.DisplayFor(model => model.goods_quantity)
						</td>
					</tr>
					<tr>
						<th class="col-md-3 col-sm-3">
							@Html.DisplayNameFor(model => model.sold_quantity)
						</th>
						<td>
							@Html.DisplayFor(model => model.sold_quantity)
						</td>
					</tr>
					<tr>
						<th class="col-md-3 col-sm-3">
							@Html.DisplayNameFor(model => model.goods_weight)
						</th>
						<td>
							@Html.DisplayFor(model => model.goods_weight) KG
						</td>
					</tr>
					<tr>
						<th class="col-md-3 col-sm-3">
							@Html.DisplayNameFor(model => model.goods_desc)
						</th>
						<td>
							@*<h3  style="overflow: hidden; white-space: nowrap; text-overflow: ellipsis;">@Html.DisplayFor(model => model.goods_desc)</h3>*@
							@Html.DisplayFor(model => model.goods_desc)
						</td>
					</tr>
					<tr>
						<th class="col-md-3 col-sm-3">
							@Html.DisplayNameFor(model => model.is_free_post)
						</th>
						<td>
							@Html.DisplayFor(model => model.is_free_post)
						</td>
					</tr>
					<tr>
						<th class="col-md-3 col-sm-3">
							@Html.DisplayNameFor(model => model.last_update)
						</th>
						<td>
							@Html.DisplayFor(model => model.last_update)
						</td>
					</tr>
				</table>
				<div class="panel-footer">
					<a href="~/Home/Index">
						<input type="button" value="Goods List" class="btn btn-primary" style="width:110px;" />
					</a>
					@{
						@*var p = "~/Home/ShowCart/" + Model.goods_id;

							<a href=@Html.Raw(p)>
								<input type="button" value="Add to Cart" class="btn btn-success" />
							</a>*@

						@Html.ActionLink("Add to Cart", "ShowCart", new { controller = "Home", id = Model.goods_id }, new { @class = "btn btn-success", @style = "width:110px;" })

					}

					@{  if (Model.goods_id == 1)
						{
						   
							@Html.ActionLink("<< Last one", "GoodsEdit", new { controller = "Home", id = ViewBag.maxGoodID  },
								new { @class = "btn btn-info", @style = "width:110px;" })
						   
							@Html.ActionLink("Next one>>", "GoodsEdit", new { controller = "Home", id = Model.goods_id + 1 },
								new { @class = "btn btn-info", @style = "width:110px;" })

						}

						else if (Model.goods_id == ViewBag.maxGoodID)
						{
							@Html.ActionLink("<< Last one", "GoodsEdit", new { controller = "Home", id = Model.goods_id - 1 },
								new { @class = "btn btn-info", @style = "width:110px;" })

							@Html.ActionLink("Next one>>", "GoodsEdit", new { controller = "Home", id =  1 },
								new { @class = "btn btn-info", @style = "width:110px;" })

						}

						else
						{

							@Html.ActionLink("<< Last one", "GoodsEdit", new { controller = "Home", id = Model.goods_id - 1 },
								new { @class = "btn btn-info", @style = "width:110px;" })
								
							@Html.ActionLink("Next one>>", "GoodsEdit", new { controller = "Home", id = Model.goods_id + 1 },
								new { @class = "btn btn-info", @style = "width:110px;" })

						}

					}

				</div>
				</div>

		</div>
		<div class="row">
			<div class="col-md-4 col-sm-6">
			</div>
			<div class="panel panel-primary col-md-6 col-sm-6" style="box-shadow:2px 2px 3px #ccc;">
				<div class="panel-heading"><h5>Comments</h5></div>
				<table class="table table-striped">
					@{

						if (ViewBag.commentExist == null)
						{
							<tr>
								<th class="panel-body">There is no comment for this product!</th>
							</tr>

						}
						else
						{
							// <div class="panel-body">success</div>
							// I can use viewmodel to show the username who made the comments if necessary
							foreach (var comment in ViewBag.myComments)
							{
								var content = comment.content;
								var date = comment.create_time;
								var star = comment.rate_star;
								<tr>
									<th class="col-md-3 col-sm-3">
										Comment Time:
									</th>
									<td>
										 <p>@Html.Raw(date)</p>
									</td>
								</tr>
								<tr>
									<th class="col-md-3 col-sm-3">
										Rating Star:
									</th>
									<td>
										<input id="input-2b" type="number" class="rating" value=@Html.Raw(star) readOnly="readonly" data-size="l"
											   data-symbol="" data-default-caption="{rating} hearts" data-star-captions="{}">
									</td>
								</tr>
								<tr>
									<th class="col-md-3 col-sm-3">
										Content:
									</th>
									<td>
										<p>@Html.Raw(content)</p>
									</td>
								</tr>
							}

						}
					}
					</table>
</div>
</div>
		</div>
	</div>
<script src="http://code.jquery.com/jquery-3.2.1.js"></script>

<script type="text/javascript">

	$(function () {

	console.log($('.carousel-inner img').height());

	//轮播自动播放
	$('#myCarousel').carousel({
		//自动4秒播放
		interval : 3000,
	});

	//设置垂直居中
	$('.carousel-control').css('line-height', $('.carousel-inner img').height() + 'px');
	$(window).resize(function () {
		var $height = $('.carousel-inner img').eq(0).height() ||
					  $('.carousel-inner img').eq(1).height() ||
					  $('.carousel-inner img').eq(2).height();

		$('.carousel-control').css('line-height', $height + 'px');
	});
});

</script>


